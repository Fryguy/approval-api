swagger: '2.0'
info:
  title: Insights Service Approval APIs
  description: APIs to query approval service
  version: 1.0.0
  contact:
    email: support@redhat.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
host: 'localhost:3000'
tags:
  - name: admins
    description: Admin-only APIs
  - name: approvers
    description: Approvers APIs
  - name: users
    description: Regular users APIs
schemes:
  - http
paths:
  # Endpoints for actions
  '/actions':
    get:
      tags:
        - admins
        - approvers
      summary: Returns list of approver actions
      description: Returns a list of approver actions
      operationId: fetchActions
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success this API return an array of actions.
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Action'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/stages/{stage_id}/actions':
    post:
      tags:
        - admins
        - approvers
      summary: Add an action to a given stage
      description: Add an action to a given stage
      operationId: addAction
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/stage_id'
        - in: body
          name: body
          description: Action object that will be added
          required: true
          schema:
            $ref: '#/definitions/Action'
      responses:
        '201':
          description: On success create an action with a given stage id
          schema:
            $ref: '#/definitions/Action'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/actions/{id}':
    get:
      tags:
        - admins
        - approvers
      summary: Find an approver action by id
      description: Find an approver action by id
      operationId: fetchActionById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return an action with given id
          schema:
            $ref: '#/definitions/Action'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    patch:
      tags:
        - admins
        - approvers
      summary: Update an existing action
      description: Update an existing action with given parameters
      operationId: updateAction
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
        - in: body
          name: body
          description: The given parameters to update the action
          required: true
          schema:
            $ref: '#/definitions/Action'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/groups':
    get:
      tags:
        - admins
      summary: Returns an array of approver groups
      description: Returns an array of approver groups
      operationId: fetchGroups
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success this API returns an array of approver groups
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Group'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    post:
      tags:
        - admins
      summary: Add a new approver group by given parameters
      description: Add a new approver group by given parameters
      operationId: addGroup
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: Parameters need to create approver group
          required: true
          schema:
            $ref: '#/definitions/Group'
      responses:
        '201':
          description: On success create a group with given parameters
          schema:
            $ref: '#/definitions/Group'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/groups/{id}':
    get:
      tags:
        - admins
      summary: Finds approver group by given id
      description: Finds approver group by given id
      operationId: fetchGroupById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return a group by given id
          schema:
            $ref: '#/definitions/Group'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    patch:
      tags:
        - admins
      summary: Update an approver group by given id
      description: Update an approver group by given id
      operationId: updateGroup
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
        - in: body
          name: body
          description: Approver group object that needs to be updated
          required: true
          schema:
            $ref: '#/definitions/Group'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    delete:
      tags:
        - admins
      summary: Delete approver group by given id
      description: Delete group by given id
      operationId: removeGroup
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/requests':
    get:
      tags:
        - admins
      summary: Return an array of approval requests
      description: Return an array of requests
      operationId: fetchRequests
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/decision'
        - $ref: '#/parameters/state'
        - $ref: '#/parameters/requester'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success this API will return a approval group by given id
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Request'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/workflows/{workflow_id}/requests':
    get:
      tags:
        - admins
      summary: List of all approval requests
      description: Returns an array of approval requests by a given workflow id
      operationId: fetchWorkflowRequests
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/workflow_id'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success this API returns an array of approval requests
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Request'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    post:
      tags:
        - users
      summary: Add a new approval request
      description: create a request by given parameters
      operationId: addRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/workflow_id'
        - in: body
          name: body
          description: Parameters need to create a request
          required: true
          schema:
            $ref: '#/definitions/Request'
      responses:
        '201':
          description: On success create a request by given parameters
          schema:
            $ref: '#/definitions/Request'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/requests/{id}':
    get:
      tags:
        - users
      summary: Return an approval request by given id
      description: Return an approval request by given id
      operationId: fetchRequestById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return an approval request by given id
          schema:
            $ref: '#/definitions/Request'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    patch:
      tags:
        - admins
      summary: Update the approval request by given id
      description: Update the approval request by given id 
      operationId: updateRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
        - in: body
          name: body
          description: Parameters to update the request
          required: true
          schema:
            $ref: '#/definitions/Request'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/stages':
    get:
      tags:
        - admins
      summary: List of approval stages
      description: Return all approval stages
      operationId: fetchStages
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success return an array of approval stages
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Stage'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/requests/{request_id}/stages':
    get:
      tags:
        - users
      summary: Returns an array of stages by given request id
      description: Returns an array of stages by given request id
      operationId: fetchRequestStages
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/request_id'
      responses:
        '200':
          description: On success return an array of stages by given request id
          schema:
            type: array
            items:
              $ref: '#/definitions/Stage'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/stages/{id}':
    get:
      tags:
        - admins
        - approvers
      summary: Return an approval stage by given id
      description: Return an approval stage by given id
      operationId: fetchStageById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return an approval stage by given id
          schema:
            $ref: '#/definitions/Stage'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/templates':
    get:
      tags:
        - admins
      summary: Returns list of templates
      description: Returns an array of templates
      operationId: fetchTemplates
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success return an array of templates
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Template'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    post:
      tags:
        - admins
      summary: Create a new template by given parameters
      description: Create a new template by given parameters
      operationId: addTemplate
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: Parameters need to create approval template
          required: true
          schema:
            $ref: '#/definitions/Template'
      responses:
        '201':
          description: On success create a template
          schema:
            $ref: '#/definitions/Template'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/templates/{id}':
    get:
      tags:
        - admins
      summary: Return a template by given id
      description: Return a template by given id
      operationId: fetchTemplateById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return a template by given id
          schema:
            $ref: '#/definitions/Template'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    patch:
      tags:
        - admins
      summary: Update the template by given parameters
      description: Update the template by given parameters
      operationId: updateTemplate
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
        - in: body
          name: body
          description: Parameters need to update template
          required: true
          schema:
            $ref: '#/definitions/Template'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    delete:
      tags:
        - admins
      summary: Delete the template by given id
      description: Delete the template by given id
      operationId: removeTemplate
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/workflows':
    get:
      tags:
        - admins
      summary: Return all approval workflows
      description: Return all approval workflows
      operationId: fetchWorkflows
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success return all workflows
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Workflow'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/templates/{template_id}/workflows':
    get:
      tags:
        - admins
      summary: Returns an array of workflows by given template id
      description: Returns an array of workflows by given template id
      operationId: fetchTemplateWorkflows
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/template_id'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      responses:
        '200':
          description: On success return an array of workflows by given template id
          headers:
            X-total-count:
              type: integer
              description: Total number of items
          schema:
            type: array
            items:
              $ref: '#/definitions/Workflow'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    post:
      tags:
        - admins
      summary: Create a workflow by given template id
      description: Create a workflow by given template id
      operationId: addWorkflow
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/template_id'
        - in: body
          name: body
          description: Parameters need to create workflow
          required: true
          schema:
            $ref: '#/definitions/Workflow'
      responses:
        '201':
          description: On success create a workflow by given template id
          schema:
            $ref: '#/definitions/Workflow'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
  '/workflows/{id}':
    get:
      tags:
        - admins
      summary: Return an approval workflow by id
      description: Return a workflow by given id
      operationId: fetchWorkflowById
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '200':
          description: On success return the workflow by its id
          schema:
            $ref: '#/definitions/Workflow'
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    patch:
      tags:
        - admins
      summary: Update an approval workflow by given id
      description: Update an approval workflow by given id
      operationId: updateWorkflow
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
        - in: body
          name: body
          description: Parameters need to update approval workflow
          required: true
          schema:
            $ref: '#/definitions/Workflow'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
    delete:
      tags:
        - admins
      summary: Delete approval workflow by given id
      description: Delete approval workflow by given id
      operationId: removeWorkflow
      produces:
        - application/json
      parameters:
        - $ref: '#/parameters/id'
      responses:
        '400':
          $ref: '#/responses/400BadRequestResponse'
        '401':
          $ref: '#/responses/401UnauthorizedResponse'
        '403':
          $ref: '#/responses/403ForbiddenResponse'
        '404':
          $ref: '#/responses/404NotFoundResponse'
        '422':
          $ref: '#/responses/422UnprocessableEntityResponse'
securityDefinitions:
  approval_auth:
    type: basic
    description: The user id/password is needed when accessing this API externally
security:
  - approval_auth: []
definitions:
  Action:
    type: object
    description: Action is kind of like processing record. Each stage may have many actions before final decision.
    required:
      - processed_by
      - stage
    properties:
      id:
        type: string
        readOnly: true
      processed_by:
        type: string
        description: Processor info who perform the action
      actioned_at:
        type: string
        format: date-time
        description: Timestamp of action processed
        readOnly: true
      notified_at:
        type: string
        format: date-time
        description: Timestamp of notification if sent
        readOnly: true
      operation:
        $ref: '#/definitions/Operation'
      comments:
        type: string
        description: Comments for action
        readOnly: true
  Decision:
    type: string
    description: Final decision, may be one of the value (undecided, approved, or denied)
    enum:
      - undecided
      - approved
      - denied
    default: undecided
  Group:
    type: object
    description: Approver groups. Each group may have one or many approvers. The first response from any approver will
      be treated as group response.
    required:
      - name
      - contact_method
      - contact_setting
    properties:
      id:
        type: string
        readOnly: true
      name:
        type: string
        description: Group name
      contact_method:
        type: string
        description: Contact type. It may be email, slack, team, etc. So far only email is supported.
        example: email
      contact_setting:
        type: object
        description: JSON object with contact Setting
  Operation:
    type: string
    description: Types of action, may be one of the value (approved, denied, notified, noted, or skipped). The stage will be updated according to the operation.
    enum:
      - approved
      - denied
      - notified
      - noted
      - skipped
    default: noted
  Request:
    type: object
    description: Approval request. Each request will associate with a workflow. Corresponding to the groups of the associated workflow, every request will have a list of stages to record the request processing details.
    required:
      - requester
      - name
      - content
    properties:
      id:
        type: string
        readOnly: true
      requester:
        type: string
        description: Requester info
      name:
        type: string
        description: Request name
      description:
        type: string
        description: Request description
      state:
        $ref: '#/definitions/State'
      decision:
        $ref: '#/definitions/Decision'
      reason:
        type: string
        description: Comments for requests
        readOnly: true
      content:
        type: object
        description: JSON object with request content
      workflow_id:
        type: string
        description: Associate workflow id
        readOnly: true
  Stage:
    type: object
    description: The stage of approval request.
    required:
      - group_id
    properties:
      id:
        type: string
        readOnly: true
      state:
        $ref: '#/definitions/State'
      decision:
        $ref: '#/definitions/Decision'
      comments:
        type: string
        description: approval stage
      group_id:
        type: string
        description: Associated group id
      request_id:
        type: string
        description: Associated request id
        readOnly: true
  State:
    type: string
    description: The state of stage or request. It may be one of values (pending, skipped, notified or finished)
    enum:
      - pending
      - skipped
      - notified
      - finished
    default: pending
  Template:
    type: object
    description: The template to categorize workflows.
    required:
      - title
    properties:
      id:
        type: string
        readOnly: true
      title:
        type: string
      description:
        type: string
  Workflow:
    type: object
    description: The workflow to process approval requests. Each workflow should link with a list of groups, in order to process approval requests.
    required:
      - name
    properties:
      id:
        type: string
        readOnly: true
      name:
        type: string
      description:
        type: string
      template_id:
        type: string
        description: Associated template id
        readOnly: true
parameters:
  id:
    name: id
    in: path
    description: query by id
    required: true
    type: integer
  template_id:
    name: template_id
    in: path
    description: id of template
    required: true
    type: integer
  workflow_id:
    name: workflow_id
    in: path
    description: id of workflow
    required: true
    type: integer
  group_id:
    name: group_id
    in: path
    description: id of group
    required: true
    type: integer
  request_id:
    name: request_id
    in: path
    description: id of request
    required: true
    type: integer
  stage_id:
    name: stage_id
    in: path
    description: id of stage
    required: true
    type: integer
  limit:
    name: limit
    in: query
    description: How many items to return at one time (max 1000)
    required: false
    type: integer
    format: int32
    minimum: 20
    maximum: 100
    default: 20
  offset:
    name: offset
    in: query
    description: Starting Offset
    required: false
    type: integer
    format: int32
    default: 0
    minimum: 0
  state:
    name: state
    in: query
    description: fetch item by given state (pending, skipped, notified, finished)
    required: false
    type: array
    items:
      type: string
      enum:
        - pending
        - skipped
        - notified
        - finished
  decision:
    name: decision
    in: query
    description: fetch item by given decision (undecided, approved, denied)
    required: false
    type: array
    items:
      type: string
      enum:
        - undecided
        - approved
        - denied
  requester:
    name: requester
    in: query
    description: fetch item by given requester
    required: false
    type: string
responses:
  400BadRequestResponse:
    description: 'Bad request'
  401UnauthorizedResponse:
    description: 'Caller is not authorized to access the resource.'
  403ForbiddenResponse:
    description: 'Caller is forbidden to perform the action.'
  404NotFoundResponse:
    description: 'The requested resource is not found.'
  422UnprocessableEntityResponse:
    description: 'The required paramters are either invalid or missed.'
  DefaultUnexpectedResponse:
    description: 'An unexpected response.'
externalDocs:
  description: Find out more about Swagger
  url: 'http://swagger.io'
